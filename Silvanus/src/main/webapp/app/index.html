<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main App</title>

    <!-- BootStrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Google Maps -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/0.6.2/pure-min.css">

    <!-- Axios API -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <!-- ChartJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.8.0/chart.min.js"></script>

    <!--Aplication-->
    <script type="text/javascript" src="../libs/request_handler.js"></script>
    <script type="text/javascript" src="../libs/dom_deliver.js"></script>
    <script src="../libs/graph.js"></script>
    <link href="../styles/main.css" rel="stylesheet">
    <link href="../styles/map.css" rel="stylesheet">
    <link href="../styles/navbar.css" rel="stylesheet">
    <link href="../styles/card.css" rel="stylesheet">

</head>
<body id="main" class="" onload='getInfo(true, "")'>
  <div id="loader" class="overlay d-none" style="z-index: 100000;">
    <div class="lds-ring center"><div></div><div></div><div></div><div></div></div>
  </div>

  <div class="overlay" style="z-index: 100000;" data-app-menu-active="false">
    <div class="position-absolute translate-middle top-50 start-50">
      <div class="light rounded-3 p-3 mt-3 shadow-sm" style="width: 20rem; height: 40rem;">
        Text
      </div>
    </div>
  </div>
  

  <nav class="app-navbar">
    <ul class="app-navbar-nav">

      <li class="app-nav-item" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-bs-target="#user-properties">
          <div class="avatar-wrapper d-flex" data-user="" style="width: 2rem; height: 2rem;">
            <img id="usr_avatar_navbar" src="../media/imgs/user.png" class="rounded-circle shadow-sm">
          </div>
          <span class="app-link-text">
            Perfil
          </span>
        </a>
      </li>

      <li class="app-nav-item" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-bs-target="#community">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-people-fill" viewBox="0 0 16 16">
            <path d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
            <path fill-rule="evenodd" d="M5.216 14A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216z"/>
            <path d="M4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
          </svg>
          <span class="app-link-text">
            Comunidade
          </span>
        </a>
      </li>

      <li class="app-nav-item" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-bs-target="#stats">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-graph-up" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z"/>
          </svg>
          <span class="app-link-text">
            Estatísticas
          </span>
        </a>
      </li>

      <!-- <li class="app-nav-item" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-bs-target="#search-user" aria-controls="offcanvasScrolling" data-tooltip="Pesquisar">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
          </svg>
          <span class="app-link-text">
            Pesquisar
          </span>
        </a>
      </li> -->

      <li class="app-nav-item" onclick="toggleDrawing(false)" data-app-menu-active="true">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-tooltip="Mostrar o mapa">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
            <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10zm0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6z"/>
          </svg>
          <span class="app-link-text">
            Mapa
          </span>
        </a>
      </li>

      <li class="app-nav-item" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="offcanvas" data-bs-target="#list-properties" aria-controls="offcanvasScrolling" data-tooltip="Adicionar uma Propriedade">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-pin-map" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"/>
            <path fill-rule="evenodd" d="M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"/>
          </svg>
          <span class="app-link-text">
            Terrenos
          </span>
        </a>
      </li>

      <li class="app-nav-item dropup" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="dropdown" id="notifications-btn" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bell-fill" viewBox="0 0 16 16">
            <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
          </svg>
          <span class="app-link-text">
            Notificações
          </span>
        </a>
        <ul id="usr_list_notification" class="dropdown-menu mt-3" aria-labelledby="notifications-btn">
        </ul>
      </li>

      <li class="app-nav-item dropup" onclick="toggleDrawing(false)">
        <a class="app-nav-link grow" data-bs-toggle="dropdown" id="settings-btn" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-gear-fill" viewBox="0 0 16 16">
            <path d="M9.405 1.05c-.413-1.4-2.397-1.4-2.81 0l-.1.34a1.464 1.464 0 0 1-2.105.872l-.31-.17c-1.283-.698-2.686.705-1.987 1.987l.169.311c.446.82.023 1.841-.872 2.105l-.34.1c-1.4.413-1.4 2.397 0 2.81l.34.1a1.464 1.464 0 0 1 .872 2.105l-.17.31c-.698 1.283.705 2.686 1.987 1.987l.311-.169a1.464 1.464 0 0 1 2.105.872l.1.34c.413 1.4 2.397 1.4 2.81 0l.1-.34a1.464 1.464 0 0 1 2.105-.872l.31.17c1.283.698 2.686-.705 1.987-1.987l-.169-.311a1.464 1.464 0 0 1 .872-2.105l.34-.1c1.4-.413 1.4-2.397 0-2.81l-.34-.1a1.464 1.464 0 0 1-.872-2.105l.17-.31c.698-1.283-.705-2.686-1.987-1.987l-.311.169a1.464 1.464 0 0 1-2.105-.872l-.1-.34zM8 10.93a2.929 2.929 0 1 1 0-5.86 2.929 2.929 0 0 1 0 5.858z"/>
          </svg>
          <span class="app-link-text">
            Definições
          </span>
          
        </a>
        <ul class="dropdown-menu" aria-labelledby="settings-btn">
          <!-- Dropdown menu links -->
          <li><a class="dropdown-item disabled" href="#">Tema</a></li>

          <li><a class="dropdown-item" href="#" onclick="toggleDrawing(false);logout()">Logout</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <main>
        <!-- Maps -->
        <div id="map" class=""></div>
        <script src="../libs/maps.js"></script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDFF-sduDxFSBjCD_C-leaSI-sTkoCNO6Y&callback=initMap&libraries=drawing"></script>

       
        
    
    
  </main>

  <!-- User Properties Offcanvas -->
  <div class="offcanvas offcanvas-start bg-light rounded-3 border-0 shadow-sm" style="" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-5" id="user-properties" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header position-relative light shadow-sm">
      <h4 class="ms-3">Perfil</h4>
      <a type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></a>
    </div>
    <div id="usr_menu" class="offcanvas-body" data-app-menu-active="true">
      
      <div class="row">
        <div class="col-md-5 col-sm-12">
          <div class="row flex-column ">
            <div class="col-12">
              <div id="usr_credentials_scrollspy" class="position-relative light rounded-3 p-3 m-1 shadow-sm">
                <div class="d-flex flex-row m-3 align-items-center">
                  <div class="avatar-wrapper" data-user="" style="min-width: 4rem; min-height: 4rem; max-width: 8rem; max-height: 8rem;">
                    <img id="usr_avatar_perfil_credentials" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
                  </div>
                  <div class="ms-3">
                    <h4 id="usr_username">Username</h4>
                    <p style="font-size: 13px;" id="usr_email" class="mb-1">Email</p>
                    <div id="usr_roles_menu">
                    </div>
                  </div>
                </div>
               
              </div>
            </div>
            <div class="col-12">
              <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 m-1 shadow-sm ">
                <div class="position-relative perfil-header mb-3">
                  <h5 class="">Perfil</h5>
                  <div class="position-absolute end-0 top-50 translate-middle-y">
                    <div id="btn_change_usr_profile_not_active" data-app-menu-active="true">
                      <a id="btn_change_usr_profile" class="text-reset change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                          <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                        </svg>
                        
                      </a> 
                    </div>
                    
                    <div id="btn_change_usr_profile_active" data-app-menu-active="false">
                      
      
                      <a class="text-reset change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                          <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                        </svg>
                        
                      </a>
                      <a class="text-reset change-usr-profile" href="#" onclick="loader('usr_change_profile_menu','true');changing_att();">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16" data-app-menu-active="true">
                          <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                        </svg>
                      </a>
                    </div>
                  </div>
                </div>
                <div id="usr_profile_menu" data-app-menu-active="true">
                  <h6>Nome Completo</h6>
                  <p id="usr_fullname" class="border-bottom">-</p>
                  <h6>NIF</h6>
                  <p id="usr_id" class="border-bottom">-</p>
                  <h6>Número de telefone</h6>
                  <p id="usr_telephone" class="border-bottom">-</p>
                  <h6>Número de smartphone</h6>
                  <p id="usr_smartphone" class="border-bottom">-</p>
                  <h6>Morada</h6>
                  <p id="usr_address" class="border-bottom">-</p>
                </div>
                <div id="usr_change_profile_menu" data-app-menu-active="false">
                  <h6>Nome Completo</h6>
                  <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
                  <h6>NIF</h6>
                  <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
                  <h6>Número de telefone</h6>
                  <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
                  <h6>Número de smartphone</h6>
                  <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
                  <h6>Morada</h6>
                  <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
                  <br>
                  <div class="d-flex flex-row justify-content-center">
                    <span class="spinner-border spinner-border-sm text-primary" style="width: 2rem; height: 2rem;" role="status" aria-hidden="true" data-app-menu-active="false"></span>
                  </div>
                </div>
                
        
              </div>
            </div>
            
          </div>
        </div>
        <div class="col-md-7 col-sm-12">
          <div class="row flex-row">
            <div class="col-4">
              <div class="bg-success bg-opacity-25 rounded-3 p-3 m-1 shadow-sm">
                <h5 class="text-center">Terrenos</h5>
                <p class="display-6 text-center">0</p>
              </div>
            </div>
            <div class="col-4">
              <div class="bg-info bg-opacity-25 rounded-3 p-3 m-1 shadow-sm">
                <h5 class="text-center">Área Total</h5>
                <p class="display-6 text-center">0</p>
              </div>
            </div>
            <div class="col-12">
              <div class="position-relative light rounded-3 p-3 m-1 shadow-sm ">
                <div class="position-relative mb-3">
                  <div class="d-flex flex-row" style="width: 100%;">
                    <h5 class="align-items-center">Procurar Utilizador</h5>
                    <div class="ms-3 input-group justify-content-end end-0" style="height: 1rem; max-width: 15rem;">
                      <a class="text-reset btn rounded-circle" href="#" onclick="get()">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                          <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                        </svg>
                      </a>
                      <input id="promote_input" class="form-control rounded-pill"></input>
                      <div class="d-flex flex-row justify-content-center">
                        <span id="promote_spinner" class="ms-3 spinner-border spinner-border-sm text-primary align-self-center" style="width: 2rem; height: 2rem;" role="status" aria-hidden="true" data-app-menu-active="false"></span>
                      </div>
                    </div>
                  </div>
                  
                </div>
                <ul id="list_users_promote" class="list-group ms-2" style="width: 100%;">

                </ul>
        
              </div>
            </div>
          </div>

        </div>
      </div>

      <!--<div class="row d-flex flex-column justify-content-center">
        <div class="col-md-6 col-sm-12 align-items-end">
          <div id="usr_credentials_scrollspy" class="position-relative light rounded-3 p-3 m-1 shadow-sm align-items-start" style="min-width: 25rem; max-width: 30rem;">
            <div class="d-flex flex-row m-3 align-items-center">
              <div class="avatar-wrapper" data-user="" style="min-width: 4rem; min-height: 4rem; max-width: 8rem; max-height: 8rem;">
                <img id="usr_avatar_perfil_credentials" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
              </div>
              <div class="ms-3">
                <h4 id="usr_username">Username</h4>
                <p style="font-size: 13px;" id="usr_email" class="mb-1">Email</p>
                <div id="usr_roles_menu">
                </div>
              </div>
            </div>
            <div class="dropdown position-absolute end-0 top-0 pe-3 pt-3">
              <a class="" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bell-fill" viewBox="0 0 16 16">
                  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
                </svg>
              </a>
            
              <ul id="usr_list_notification" class="dropdown-menu border-0 shadow-sm mt-3" aria-labelledby="dropdownMenuLink">
              </ul>
            </div>
           
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 m-1 shadow-sm " style="min-width: 25rem; max-width: 30rem; height: calc(100%-4rem);">
            <div class="position-relative perfil-header mb-3">
              <h5 class="">Perfil</h5>
              <div class="position-absolute end-0 top-50 translate-middle-y">
                <div id="btn_change_usr_profile_not_active" data-app-menu-active="true">
                  <a id="btn_change_usr_profile" class="change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                      <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                    </svg>
                    
                  </a> 
                </div>
                
                <div id="btn_change_usr_profile_active" data-app-menu-active="false">
                  
  
                  <a class="change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                    
                  </a>
                  <a class="change-usr-profile" href="#" onclick="loader('usr_change_profile_menu','true');changing_att();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16" data-app-menu-active="true">
                      <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div id="usr_profile_menu" data-app-menu-active="true">
              <h6>Nome Completo</h6>
              <p id="usr_fullname" class="border-bottom">-</p>
              <h6>NIF</h6>
              <p id="usr_id" class="border-bottom">-</p>
              <h6>Número de telefone</h6>
              <p id="usr_telephone" class="border-bottom">-</p>
              <h6>Número de smartphone</h6>
              <p id="usr_smartphone" class="border-bottom">-</p>
              <h6>Morada</h6>
              <p id="usr_address" class="border-bottom">-</p>
            </div>
            <div id="usr_change_profile_menu" data-app-menu-active="false">
              <h6>Nome Completo</h6>
              <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>NIF</h6>
              <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Número de telefone</h6>
              <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Número de smartphone</h6>
              <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Morada</h6>
              <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
              <br>
              <div class="d-flex flex-row justify-content-center">
                <span class="spinner-border spinner-border-sm text-primary" style="width: 2rem; height: 2rem;" role="status" aria-hidden="true" data-app-menu-active="false"></span>
              </div>
            </div>
            
    
          </div>
        </div>
      </div>
      <div class="row d-flex flex-column justify-content-center">
        <div class="col-md-6 col-sm-12 align-items-end">
          <div id="usr_credentials_scrollspy" class="position-relative light rounded-3 p-3 m-1 shadow-sm align-items-start" style="min-width: 25rem; max-width: 30rem;">
            <div class="d-flex flex-row m-3 align-items-center">
              <div class="avatar-wrapper" data-user="" style="min-width: 4rem; min-height: 4rem; max-width: 8rem; max-height: 8rem;">
                <img id="usr_avatar_perfil_credentials" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
              </div>
              <div class="ms-3">
                <h4 id="usr_username">Username</h4>
                <p style="font-size: 13px;" id="usr_email" class="mb-1">Email</p>
                <div id="usr_roles_menu">
                </div>
              </div>
            </div>
            <div class="dropdown position-absolute end-0 top-0 pe-3 pt-3">
              <a class="" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-bell-fill" viewBox="0 0 16 16">
                  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zm.995-14.901a1 1 0 1 0-1.99 0A5.002 5.002 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901z"/>
                </svg>
              </a>
            
              <ul id="usr_list_notification" class="dropdown-menu border-0 shadow-sm mt-3" aria-labelledby="dropdownMenuLink">
              </ul>
            </div>
           
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 m-1 shadow-sm " style="min-width: 25rem; max-width: 30rem; height: calc(100%-4rem);">
            <div class="position-relative perfil-header mb-3">
              <h5 class="">Perfil</h5>
              <div class="position-absolute end-0 top-50 translate-middle-y">
                <div id="btn_change_usr_profile_not_active" data-app-menu-active="true">
                  <a id="btn_change_usr_profile" class="change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-pen" viewBox="0 0 16 16">
                      <path d="m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001zm-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708l-1.585-1.585z"/>
                    </svg>
                    
                  </a> 
                </div>
                
                <div id="btn_change_usr_profile_active" data-app-menu-active="false">
                  
  
                  <a class="change-usr-profile" href="#" onclick="toggleChangeProfileMenu('usr_profile_menu', 'usr_change_profile_menu', 'btn_change_usr_profile_not_active', 'btn_change_usr_profile_active')">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
                    </svg>
                    
                  </a>
                  <a class="change-usr-profile" href="#" onclick="loader('usr_change_profile_menu','true');changing_att();">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-check2" viewBox="0 0 16 16" data-app-menu-active="true">
                      <path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"/>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
            <div id="usr_profile_menu" data-app-menu-active="true">
              <h6>Nome Completo</h6>
              <p id="usr_fullname" class="border-bottom">-</p>
              <h6>NIF</h6>
              <p id="usr_id" class="border-bottom">-</p>
              <h6>Número de telefone</h6>
              <p id="usr_telephone" class="border-bottom">-</p>
              <h6>Número de smartphone</h6>
              <p id="usr_smartphone" class="border-bottom">-</p>
              <h6>Morada</h6>
              <p id="usr_address" class="border-bottom">-</p>
            </div>
            <div id="usr_change_profile_menu" data-app-menu-active="false">
              <h6>Nome Completo</h6>
              <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>NIF</h6>
              <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Número de telefone</h6>
              <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Número de smartphone</h6>
              <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
              <h6>Morada</h6>
              <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
              <br>
              <div class="d-flex flex-row justify-content-center">
                <span class="spinner-border spinner-border-sm text-primary" style="width: 2rem; height: 2rem;" role="status" aria-hidden="true" data-app-menu-active="false"></span>
              </div>
            </div>
            
    
          </div>
        </div>
      </div>-->

      <div class="d-flex justify-content-start">
        
      </div>

      <!-- Toast Handler-->
    </div>
    <!-- 
      <div id="usr_change_profile_menu" class="offcanvas-body" >
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
          <a id="edit-profile-btn" type="button" class="btn text-reset end-0" onclick="alert('Editar perfil')">
            <img src="../media/icons/edit_black_24dp.svg" class="grow" alt="Editar">
          </a>
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_profile">
        </div>
      </div>
      <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 mt-3 shadow-sm">
        <h5 class="mb-3">Perfil</h5>
        <h6>Nome Completo</h6>
        <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>NIF</h6>
        <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de telefone</h6>
        <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de smartphone</h6>
        <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Morada</h6>
        <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_profile_menu', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="changing_att()">Alterar</a>
          </div>
        </div>
      </div>
    </div>
    -->
    
    <div id="usr_change_password" class="offcanvas-body" data-app-menu-active="false">
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_password">
        </div>
      </div>
      <div class="light rounded-3 p-3 mt-3 shadow-sm">
        <h6>Palavra-passe nova</h6>
        <input id="usr_new_password_change_password" class="form-control rounded-pill"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_password', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="change_password()">Alterar</a>
          </div>
        </div>
      </div>
      
      <!-- Toast Handler-->
    </div>
  </div>

  <!-- Community Offcanvas -->
  <div class="offcanvas offcanvas-start bg-light rounded-3 border-0 shadow-sm" style="" data-bs-scroll="true" data-bs-backdrop="true" tabindex="-5" id="community" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header position-relative light shadow-sm">
      <h4 class="ms-3">Comunidade</h4>
      <a type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></a>
    </div>
    <div id="community-menu" class="offcanvas-body" data-app-menu-active="true">
      
      <div class="row">
        <div class="col-md-5 col-sm-12">
          <div class="row flex-column ">
            <div class="col-12">
              <div class="light rounded-3 p-3 m-1 shadow-sm">
                <div class="d-flex flex-row align-items-center justify-content-center mb-3">
                  
                  <div class="avatar-wrapper" data-user="" style="max-width: 7rem; max-height: 7rem;">
                    <img id="usr_avatar_perfil_credentials" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
                  </div>
                </div>
                <h4 class=" mb-3 text-center">Nome da Comunidade</h4>
                
                <h6>Responsável pela comunidade:</h6>
                <div id="community-responsible">

                </div>
                
                <h6 class="mt-3">Número de Membros:</h6>
                <p class="border-bottom">0</p>
                <h6>Ponto de Interesse:</h6>
                <p class="border-bottom">-</p>
              </div>
            </div>
            <div class="col-12">
              <div class="position-relative light rounded-3 p-3 m-1 shadow-sm">
                <div class="position-absolute end-0 top-0 mt-3 me-3 me-0">
                  <a type="button" class="text-reset ms-1 me-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Procurar">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                      <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                    </svg>
                  </a>
                  <a type="button" class="text-reset ms-1 me-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Adicionar membros">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-plus-fill" viewBox="0 0 16 16">
                      <path d="M1 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                      <path fill-rule="evenodd" d="M13.5 5a.5.5 0 0 1 .5.5V7h1.5a.5.5 0 0 1 0 1H14v1.5a.5.5 0 0 1-1 0V8h-1.5a.5.5 0 0 1 0-1H13V5.5a.5.5 0 0 1 .5-.5z"/>
                    </svg>
                  </a>
                  <a type="button" class="text-reset ms-1 me-1" data-bs-toggle="tooltip" data-bs-placement="top" title="Ver todos os membros">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list-ul" viewBox="0 0 16 16">
                      <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zm-3 1a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 4a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                    </svg>
                  </a>
                </div>
                
                <h4 class="">Lista de Membros</h4>
                <ul id="list_community_members" class="list-group ms-2" style="width: 100%;">
                </ul>
              </div>
            </div>

            
            
            
          </div>
        </div>
        <div class="col-md-7 col-sm-12">
          <div class="row flex-row">
            <div class="col-4">
              <div class="bg-success bg-opacity-25 rounded-3 p-3 m-1 shadow-sm">
                <h5 class="text-center">Terrenos</h5>
                <p class="display-6 text-center">0</p>
              </div>
            </div>
            <div class="col-4">
              <div class="bg-info bg-opacity-25 rounded-3 p-3 m-1 shadow-sm">
                <h5 class="text-center">Área Total</h5>
                <p class="display-6 text-center">0</p>
              </div>
            </div>
            <div class="col-12">
              <div class="light rounded-3 p-3 m-1 shadow-sm ">
                <h4 class="ms-3">Terrenos Partilhados</h4>
                <div class="d-flex flex-row justify-content-center">
                  <input type="button" onclick="togglePolygonDrawingControl(true)" class="btn btn-primary rounded-pill" value="Registar novo terreno" data-bs-toggle="offcanvas" data-bs-target="#request-terrain-offcanvas" aria-controls="offcanvasScrolling" data-tooltip="Adicionar uma Propriedade"> 
                </div>
              </div>
            </div>

            <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
              <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
              </symbol>
              <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
              </symbol>
              <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </symbol>
            </svg>
            <div class="col-12">
              <div class="alert alert-info d-flex align-items-center m-1" role="alert">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:"><use xlink:href="#info-fill"/></svg>
                <div class="ms-2">
                  Todos os Terrenos registados na sua conta serão visualizados por todos os membros da sua comunidade
                </div>
              </div>
              
            </div>
          </div>

        </div>
      </div>
    </div>
    <!-- 
      <div id="usr_change_profile_menu" class="offcanvas-body" >
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
          <a id="edit-profile-btn" type="button" class="btn text-reset end-0" onclick="alert('Editar perfil')">
            <img src="../media/icons/edit_black_24dp.svg" class="grow" alt="Editar">
          </a>
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_profile">
        </div>
      </div>
      <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 mt-3 shadow-sm">
        <h5 class="mb-3">Perfil</h5>
        <h6>Nome Completo</h6>
        <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>NIF</h6>
        <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de telefone</h6>
        <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de smartphone</h6>
        <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Morada</h6>
        <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_profile_menu', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="changing_att()">Alterar</a>
          </div>
        </div>
      </div>
    </div>
    -->
    
    <div id="usr_change_password" class="offcanvas-body" data-app-menu-active="false">
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_password">
        </div>
      </div>
      <div class="light rounded-3 p-3 mt-3 shadow-sm">
        <h6>Palavra-passe nova</h6>
        <input id="usr_new_password_change_password" class="form-control rounded-pill"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_password', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="change_password()">Alterar</a>
          </div>
        </div>
      </div>
      
      <!-- Toast Handler-->
    </div>
  </div>

  <!-- Statistics Offcanvas -->
  <div class="offcanvas offcanvas-start bg-light rounded-3 border-0 shadow-sm" style="" data-bs-scroll="true" data-bs-backdrop="true" tabindex="-5" id="stats" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header position-relative light shadow-sm">
      <h4 class="ms-3">Estatísticas</h4>
      <a type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></a>
    </div>
    <div id="stats-menu" class="offcanvas-body" data-app-menu-active="true">


      <div class="row">
        <div class="col-md-6 col-sm-12">
          <div class="row flex-column">
            <div class="col-12">
              <div class="light rounded-3 p-3 m-1 shadow-sm">
                <h4>Área Total</h4>
                <canvas id="stats_total_area" style="height: 800px;"></canvas>
              </div>
            </div>
            <div class="col-12">
              <div class="position-relative light rounded-3 p-3 m-1 shadow-sm">
                <h4>Temperatura Ambiente</h4>
                <canvas id="stats_ambient_temperature" style="height: 800px;"></canvas>

              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-sm-12">
          <div class="row flex-column">
            <div class="col-12">
              <div class="position-relative light rounded-3 p-3 m-1 shadow-sm">
                <h4>Tipos de terrenos</h4>
                <canvas id="stats_types_terrain" style="height: 800px;"></canvas>
    
              </div>
            </div>
            <div class="col-12">
              <div class="position-relative light rounded-3 p-3 m-1 shadow-sm">
                <h4>Tipos de terrenos</h4>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
    <!-- 
      <div id="usr_change_profile_menu" class="offcanvas-body" >
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
          <a id="edit-profile-btn" type="button" class="btn text-reset end-0" onclick="alert('Editar perfil')">
            <img src="../media/icons/edit_black_24dp.svg" class="grow" alt="Editar">
          </a>
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_profile">
        </div>
      </div>
      <div id="usr_perfil_scrollspy" class="light rounded-3 p-3 mt-3 shadow-sm">
        <h5 class="mb-3">Perfil</h5>
        <h6>Nome Completo</h6>
        <input id="usr_fullname_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>NIF</h6>
        <input id="usr_id_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de telefone</h6>
        <input id="usr_telephone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Número de smartphone</h6>
        <input id="usr_smartphone_input" class="form-control rounded-pill mb-3" value="-"></input>
        <h6>Morada</h6>
        <input id="usr_address_input" class="form-control rounded-pill" value="-"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_profile_menu', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="changing_att()">Alterar</a>
          </div>
        </div>
      </div>
    </div>
    -->
    
    <div id="usr_change_password" class="offcanvas-body" data-app-menu-active="false">
      <div id="usr_credentials_scrollspy" class="light rounded-3 p-3 shadow-sm">
        <div class="d-flex flex-row justify-content-center mb-3">
          <div class="avatar-wrapper" data-user="" style="width: 8rem; height: 8rem;">
            <img id="usr_avatar_perfil" src="../media/imgs/user.png" class="rounded-circle shadow-sm" style="">
          </div>
        </div>
        <h3 id="usr_username">Username
        </h3>
        <h5 id="usr_email" class="">Email</h5>
        <div id="usr_roles_change_password">
        </div>
      </div>
      <div class="light rounded-3 p-3 mt-3 shadow-sm">
        <h6>Palavra-passe nova</h6>
        <input id="usr_new_password_change_password" class="form-control rounded-pill"></input>
        <br>
        <div class="d-flex flex-column justify-content-center">
          <div class="d-flex flex-row justify-content-center">
            <a id="btn_callback_change_usr_profile" onclick="toggleChangeProfileMenu('usr_change_password', 'usr_menu')" href="#" class="btn btn-danger m-3 btn-change-usr-profile" onclick="">Cancelar</a>
            <a href="#" class="btn btn-primary m-3" onclick="change_password()">Alterar</a>
          </div>
        </div>
      </div>
      
      <!-- Toast Handler-->
    </div>
  </div>

  <!-- Help Offcanvas -->
  <div class="offcanvas offcanvas-bottom rounded-3 bg-light" style="z-index: 10; height: 100vh;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="help-offcanvas" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header">
      <h4>Ajuda</h4>
      <button type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      
      <p> Tutorial of this application </p>
      
    </div>
  </div>
      
  <!-- About us Offcanvas -->
  <div class="offcanvas offcanvas-bottom rounded-3 bg-light" style="z-index: 10; height: 100vh;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="about-us-offcanvas" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header light shadow-sm">
      <h4>Sobre nós</h4>
      <button type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <p> Toda informação sobre nos </p>
    </div>
  </div>
    
  <!-- List Properties Sidebar -->
  <div class="offcanvas offcanvas-start bg-light rounded-3 border-0 shadow-sm" style="z-index: 10;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="list-properties" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header light shadow-sm">
      <div class="dropdown">
        <a class="dropdown-toggle btn light shadow-sm" data-bs-toggle="dropdown" href="#" role="button" aria-expanded="false">Ir para...</a>
        <ul class="dropdown-menu">
          <li >
            <a class="dropdown-item" href="#usr_list_terrain_scrollpsy">Lista de Terrenos</a>
          </li>
          <li><a class="dropdown-item" href="#usr_pending_terrain_scrollpsy">Pedidos Pendentes</a></li>
        </ul>
      </div>
      <a type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></a>
    </div>
    <div class="offcanvas-body ">
      <div class="row">
        <div class="col-md-6 col-sm-12">
          <div id="usr_list_terrain_scollspy" class="row light rounded-3 m-1 p-3 shadow-sm">
            <h5 class="mb-3">Lista de Terrenos</h5>
            <div class="d-flex flex-row justify-content-center align-items-center">
              <div class="row" id="usr_terrain_count" data-app-value=0>
              </div>
            </div>
            

          </div>
        </div>
        <div class="col-md-6 ">
          <div id="usr_pending_terrain_scrollpsy" class="row light rounded-3 m-1 p-3 shadow-sm" data-app-value=0>
            <h5 class="mb-3">Pedidos Pendentes</h5>
            
            <div class="row d-flex flex-row justify-content-center" id="usr_pending_terrain_list">
            </div>

            <!-- No Properties? -->
            <div id="no_pending_requests">
              <p class="text-center"></p>
            </div>
            
            <!-- Add New Property Button --> 
            <div class="d-flex flex-row justify-content-center">
              <input type="button" onclick="togglePolygonDrawingControl(true)" class="btn btn-primary rounded-pill" value="Registar novo terreno" data-bs-toggle="offcanvas" data-bs-target="#request-terrain-offcanvas" aria-controls="offcanvasScrolling" data-tooltip="Adicionar uma Propriedade"> 
            </div>

            

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Request Terrain Sidebar -->
  <div class="offcanvas offcanvas-end rounded-3 bg-light border-0 shadow-sm" style="z-index: 10;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="request-terrain-offcanvas" aria-labelledby="offcanvasScrollingLabel" data-expand="true">
    <div class="offcanvas-header position-relative light shadow-sm">
      <h5 class="offcanvas-title" id="offcanvasScrollingLabel">Novo Terreno</h5> 
      <button id="request-terrain-btn-close" type="button" class="btn-close text-reset" onclick="toggleDrawing(false)" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      <button id="request-terrain-btn-expand" class="position-absolute translate-middle-x start-50 btn border-0 text-reset" onclick="toggleExpandOffcanvas('request-terrain-offcanvas')">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-chevron-bar-down" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M3.646 4.146a.5.5 0 0 1 .708 0L8 7.793l3.646-3.647a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 0-.708zM1 11.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5z"/>
        </svg>
      </button>
    </div>
    <div class="offcanvas-body">
      <div class="alert alert-success shadow-sm" role="alert">
        <p>Crie novos pontos no mapa para delimitar a <strong>região que pretende registar</strong>.</p>
      </div>
      <div class="light p-3 mb-3 rounded-3 shadow-sm">
        <div class="light p-3 mb-3 rounded-3 shadow-sm">
          <h5 class="mb-3">Sobre o terreno</h5>
          <div class="mb-3">
            <label for="name-terrain" class="form-label">Nome do Terreno</label>
            <input type="text" class="form-control rounded-pill" id="name-terrain">
          </div>
          <div class="mb-3">
            <label for="district-terrain" class="form-label">Distrito</label>
            <input type="text" class="form-control rounded-pill" id="district-terrain">
          </div>
          <div class="mb-3">
            <label for="townhall-terrain" class="form-label">Concelho</label>
            <input type="text" class="form-control rounded-pill" id="townhall-terrain">
          </div>
          <div class="mb-3">
            <label for="section-terrain" class="form-label">Número de Artigo</label>
            <input type="text" class="form-control rounded-pill" id="section-terrain">
          </div>
          <div class="mb-3">
            <label for="number-article-terrain" class="form-label">Número de Secção</label>
            <input type="text" class="form-control rounded-pill" id="number-article-terrain">
          </div>
          <div class="mb-3">
            <label for="documentation-validation-terrain" class="form-label">Documentos de Validação do Terreno</label>
            <input type="file" class="form-control rounded-pill" id="documentation-validation-terrain">
          </div>
          <div class="mb-3">
            <label for="type_of_terrain_select" class="form-label">Tipo de Terreno</label>
            <select id="type_of_terrain_select" class="form-select" onchange="typeTerrain('type_of_terrain_select', 'other_type_of_terrain_checked')">
              <option value="empty" selected>Vazio</option>
              <option value="habitation">Habitação</option>
              <option value="cultivation">Cultivo</option>
              <option value="business">Empresarial/Adminstrativo</option>
              <option value="cultivation">Ensino</option>
              <option value="commerce">Comércio</option>
              <option value="hospital">Hospitalar</option>
              <option value="infrastructure">Estrada/Infraestrutura</option>
              <option value="other">Outro</option>
            </select>
          </div>
          <div id="other_type_of_terrain_checked" class="mb-3" data-app-menu-active="false">
            <div class="mb-3">
              <input type="text" class="form-control rounded-pill" id="other_type_of_terrain">
            </div>
          </div>
        </div>
        
        <div class="light p-3 mb-3 rounded-3 shadow-sm">
          <h5 class="mb-3">Proprietário</h5>
          <div class="d-flex flex-column justify-content-center mb-3">
            <div class="form-check m-1">
              <input class="form-check-input" type="radio" name="acc_terrain" id="this_acc_terrain_option" onclick="setMenuID('other_acc_terrain_checked', 'false')" checked>
              <label class="form-check-label" for="this_acc_terrain_option">
                Esta conta
              </label>
            </div>
            <div class="form-check m-1">
              <input class="form-check-input" type="radio" name="acc_terrain" id="other_acc_terrain_option" onclick="setMenuID('other_acc_terrain_checked', 'true')">
              <label class="form-check-label" for="other_acc_terrain_option">
                Outra conta/pessoa
              </label>
            </div>
          </div>
          <div id="other_acc_terrain_checked" data-app-menu-active="false">
            <label for="other_acc_fullname_input" class="form-label">Nome Completo</label>
            <input id="other_acc_fullname_input" class="form-control rounded-pill mb-3" value=""></input>
            <label for="other_acc_id_input" class="form-label">NIF</label>
            <input id="other_acc_id_input" class="form-control rounded-pill mb-3" value=""></input>
            <label for="other_acc_telephone_input" class="form-label">Número de telefone</label>
            <input id="other_acc_telephone_input" class="form-control rounded-pill mb-3" value=""></input>
            <label for="other_acc_smartphone_input" class="form-label">Número de smartphone</label>
            <input id="other_acc_smartphone_input" class="form-control rounded-pill mb-3" value=""></input>
            <label for="other_acc_address_input" class="form-label">Morada</label>
            <input id="other_acc_address_input" class="form-control rounded-pill" value=""></input>
            <br>
          </div>
          
        </div>

        <div class="light p-3 mb-3 rounded-3 shadow-sm">
          <h5 class="mb-3">Informação Adicional</h5>
          <div class="mb-3">
            <label for="description-terrain" class="form-label">Descrição</label>
            <textarea class="form-control rounded-3" id="description-terrain" rows="2"></textarea>
          </div>
          <div class="mb-3">
            <label for="image-terrain" class="form-label">Foto do Terreno</label>
            <input type="file" class="form-control rounded-pill" id="image-terrain">
          </div>
          <div class="mb-3">
            <label for="type-terrain" class="form-label">Cobertura de Solo</label>
            <input type="text" class="form-control rounded-pill" id="type-terrain">
          </div>
          <div class="mb-3">
            <label for="current-use-terrain" class="form-label">Uso atual</label>
            <input type="text" class="form-control rounded-pill" id="current-use-terrain">
          </div>
          <div class="mb-3">
            <label for="previous-use-terrain" class="form-label">Uso anterior</label>
            <input type="text" class="form-control rounded-pill" id="previous-use-terrain">
          </div>
          <div class="mb-3">
            <label for="define-route-terrain" class="form-label">Caminho de entrada para o terreno</label>
            <br>
            <input id="define-route-terrain" type="button" class="btn btn-info rounded-pill" data-bs-dismiss="offcanvas" aria-label="Close" value="Definir um caminho" onclick="toggleRouteDrawingControl(true,true)">
          </div>
          
        </div>

        <div class="alert alert-info alert-dismissible shadow-sm" role="alert">
          <p>Certifique-se que preencheu os campos disponiveis de forma correta.</p>
          <strong>Não será possivel alterar os campos deste registo mais tarde. ;)</strong>
          
          <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <!-- Register Property Button --> 
        <div class="input-group center-x mt-3 mb-3" style=""> 
          <input id="redirect-request-property" type="button" style="width: 10rem;" class="btn btn-primary center-x rounded-pill" value="Registar" onclick="submitPolygon()"> 
        </div> 
      </div>
      
      
    </div>
  </div>

  <div id="route_definition_menu" class="app-popup" style="z-index: 100000;" data-app-menu-active="false">
    <div class="position-absolute translate-middle start-50">
      <div class="light rounded-pill p-1 shadow-sm" style="">
        <a type="button" class="btn text-reset me-1" data-bs-toggle="offcanvas" data-bs-target="#request-terrain-offcanvas" aria-controls="offcanvasScrolling" data-tooltip="Voltar" onclick="toggleRouteDrawingControl(false,true)">
          <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-check-lg" viewBox="0 0 16 16">
            <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
          </svg>
        </a>
        <a type="button" class="btn text-reset ms-1" data-bs-toggle="offcanvas" data-bs-target="#request-terrain-offcanvas" aria-controls="offcanvasScrolling" data-tooltip="Voltar" onclick="toggleRouteDrawingControl(false,false)">
          <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
            <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
          </svg>
        </a>
      </div>
    </div>
  </div>
  
  <!-- Terrain Properties Sidebar -->
  <div class="terrain-list">
    <div class="offcanvas offcanvas-start rounded-3" style="z-index: 10;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="terrain-properties" aria-labelledby="offcanvasScrollingLabel">
      <div class="offcanvas-header light shadow-sm">
        <h4 id="terrain_name">Nome Terreno</h4>
        
        <button type="button" class="btn-close text-reset position-absolute end-0 translate-middle-x" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body bg-light">
        <div class="row">
          <div class="col-md-6 col-sm-12">
            <div class="row flex-column">
              <div class="col-12">
                <div class="light p-3 mb-3 rounded-3 shadow-sm">
                  <h5 class="mb-3">Informação</h5>
                  <p>Concelho</p>
                  <p class="border-bottom" id="terrain_townhall">-</p>
                  <p>Distrito</p>
                  <p class="border-bottom" id="terrain_district">-</p>
                  <p>Número de Artigo</p>
                  <p class="border-bottom" id="terrain_number_article">-</p>
                  <p>Número de Secção</p>
                  <p class="border-bottom" id="terrain_number_section">-</p>
                  <p>Documentos de Validação</p>
                  <select id="terrain_documents_validation" class="form-select" size="5">
                  </select>
                </div>
              </div>
              <div class="col-12">
                <div class="light p-3 mb-3 rounded-3 shadow-sm">
                  <h5 class="mb-3">Informação Adicional</h5>
                  <p>Descrição</p>
                  <p class="border rounded-3 p-3" id="terrain_description">-</p>
                  <p>Cobertura de Solo</p>
                  <p class="border-bottom" id="terrain_type">-</p>
                  <p>Uso atual</p>
                  <p class="border-bottom" id="terrain_current_use">-</p>
                  <p>Uso anterior</p>
                  <p class="border-bottom" id="terrain_previous_use">-</p>
                </div>
              </div>
            </div>
            
          </div>
          <div class="col-md-6 col-sm-12">
            <div class="row">
              <div class="col-12">
                <div class="light mb-3 p-3 rounded-3 shadow-sm">
                  <div class="d-flex flex-row mb-3 align-items-center">
                    <h5 class="me-3">Foto do terreno</h5>
                    <a type="button" class="btn text-reset me-3">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-map" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M15.817.113A.5.5 0 0 1 16 .5v14a.5.5 0 0 1-.402.49l-5 1a.502.502 0 0 1-.196 0L5.5 15.01l-4.902.98A.5.5 0 0 1 0 15.5v-14a.5.5 0 0 1 .402-.49l5-1a.5.5 0 0 1 .196 0L10.5.99l4.902-.98a.5.5 0 0 1 .415.103zM10 1.91l-4-.8v12.98l4 .8V1.91zm1 12.98 4-.8V1.11l-4 .8v12.98zm-6-.8V1.11l-4 .8v12.98l4-.8z"/>
                      </svg>
                    </a>
                  </div>
                  
                  <div class="avatar-wrapper rounded-3" style="width: 100%;">
                    <img class="rounded-3" src="../media/imgs/natureza1.jpg" alt="Foto do terreno">
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="row flex-row">
                  <div class="col-4">
                    <div class="bg-info bg-opacity-10 rounded-3 p-3 shadow-sm w-100 h-75">
                      <p class="text-center">Temperatura Mínima</p>
                      <p class="display-6 text-center pb-3">0</p>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="bg-danger bg-opacity-10 rounded-3 p-3 shadow-sm w-100 h-75">
                      <p class="text-center">Temperatura Máxima</p>
                      <p id="terrain_min_temp" class="display-6 text-center pb-3">0</p>
                    </div>
                  </div>
                  <div class="col-4">
                    <div class="bg-danger bg-opacity-25 rounded-3 p-3 shadow-sm w-100 h-75">
                      <p class="text-center">Risco Incêndio</p>
                      <p id="terrain_rcm" class="display-6 text-center pb-3">0</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="col-12">
                <div class="light p-3 mb-3 rounded-3 shadow-sm">
                  <h5 class="mb-3">Proprietário</h5>
                  <h6>Nome Completo</h6>
                  <p id="owner_fullname" class="border-bottom">-</p>
                  <h6>NIF</h6>
                  <p id="owner_id" class="border-bottom">-</p>
                  <h6>Número de telefone</h6>
                  <p id="owner_telephone" class="border-bottom">-</p>
                  <h6>Número de smartphone</h6>
                  <p id="owner_smartphone" class="border-bottom">-</p>
                  <h6>Morada</h6>
                  <p id="owner_address" class="border-bottom">-</p>
                </div>
              </div>
            </div>
            
          </div>
        </div>

        <!-- Toast Handler-->
          
      </div>
    </div>
  </div>

  <!-- Verification Terrain Sidebar -->
  <div class="offcanvas offcanvas-start rounded-3" style="z-index: -10; left: 4rem;" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1" id="verification-terrain-offcanvas" aria-labelledby="offcanvasScrollingLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasScrollingLabel">Lista de Verificações</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="row">
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Special title treatment</h5>
              <span class="badge rounded-pill bg-danger pb-1">Não aprovado</span>
              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
            </div>
          </div>
        </div>
        <div class="col-12">
          <div class="card">
            <div class="card-body">
              <h5 class="card-title">Special title treatment</h5>
              <span class="badge rounded-pill bg-warning pb-1">Pendente</span>
              <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
              <a href="#" class="btn btn-success">Aprovar</a>
              <a href="#" class="btn btn-danger">Não Aprovar</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">

  </script>
  <script type="text/javascript" src="app.js"></script>

  
</body>
</html>